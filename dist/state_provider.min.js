!function t(e,r,i){function n(a,u){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return n(r?r:t)},l,l.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var n=t("./state_provider.js"),o=i(n);window.StateProvider=o["default"]},{"./state_provider.js":2}],2:[function(t,e,r){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(s){n=!0,o=s}finally{try{!i&&u["return"]&&u["return"]()}finally{if(n)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(e){n(this,t),e=Object.assign({timeFunction:function(){return(new Date).getTime()},deleteOnRestore:!1},e),this._timeFunction=e.timeFunction,this._deleteOnRestore=e.deleteOnRestore,this._items=new Map,this._times=[],this._dontLog=!1}return a(t,[{key:"time",value:function(){return this._timeFunction()}},{key:"undo",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=this._activeTime;void 0===e&&(e=this._times[this._times.length-1]);var r=this._times.filter(function(t){return e>t});r=r.slice(r.length-t),r.length?this.restore(r[0]):this.restore(-(1/0))}},{key:"redo",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(void 0!==this._activeTime){var r=this._times.filter(function(e){return e>t._activeTime});r=r.slice(0,e),r.length&&this.restore(r[r.length-1])}}},{key:"savedTimes",value:function(){return this._times}},{key:"restore",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.time():arguments[0];this._activeTime=t,this._dontLog=!0;var e=!0,r=!1,n=void 0;try{for(var a,u=this._items[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var s,f=o(a.value,2),l=f[0],c=f[1];if(this._deleteOnRestore)for(var h in l)delete l[h];(s=Object).assign.apply(s,[l].concat(i(c.filter(function(e){return e.time<=t}).map(function(t){return t.data}))))}}catch(v){r=!0,n=v}finally{try{!e&&u["return"]&&u["return"]()}finally{if(r)throw n}}this._dontLog=!1}},{key:"add",value:function(t){this._items.set(t,[{time:-(1/0),data:Object.assign({},t)}]);var e={set:function(t,e,r){var i=this;if(!this._dontLog){var n=this.time(),a=this._items.get(t);if(void 0!==this._activeTime){var u=!0,s=!1,f=void 0;try{for(var l,c=this._items[Symbol.iterator]();!(u=(l=c.next()).done);u=!0)for(var h=o(l.value,2),v=h[1];v.length&&v[v.length-1].time>this._activeTime;)v.pop()}catch(m){s=!0,f=m}finally{try{!u&&c["return"]&&c["return"]()}finally{if(s)throw f}}this._times=this._times.filter(function(t){return t<=i._activeTime}),this._activeTime=void 0}var d={time:n,data:{}};a.length&&a[a.length-1].time==n?d=a[a.length-1]:(a.push(d),this._times.push(n)),d.data[e]=r}return t[e]=r,r}.bind(this)};return new Proxy(t,e)}}]),t}();r["default"]=u},{}]},{},[1]);